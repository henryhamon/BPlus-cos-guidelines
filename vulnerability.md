# Vulnerability

## Xecute

:red_circle: Fatal.

The use of XECUTE command has security and performance implications:

```cos
    xecute "do ..something()"
```
* Security: the command to be executed may be a user input; if validation is not performed thoroughly, malicious code may be executed.
* Performance: the string input needs to be constructed (if not a single string literal but a concatenation of strings, for instnace) and evaluated.

For these reasons, you should avoid using XECUTE and use a proper set of commands instead.

## Method declared as "ProcedureBlock = 0"

:red_circle: Fatal.

Usage of ProcedureBlock = 0 in method modifiers is confusing (at best) and dangerous (always). Consider those two classes, running in the same process:

```cos
    // Class C1
    Class C1
    {
    ClassMethod m() [ ProcedureBlock = 0 ]
    {
        set x = "world"
    }
    }

    // Class C2
    Class C2
    {
    ClassMethod m() [ ProcedureBlock = 0 ]
    {
        do ##class(C1).m()
        w "hello ", x, "!", !
    }
    }
```

## Not ProcedureBlock

:red_circle: Fatal.

Usage of Not ProcedureBlock in class modifiers is, confusing (at best) and dangerous (always). Consider those two classes running in the same process:

```cos
    // Class C1
    Class C1 [ Not ProcedureBlock ]
    {
    ClassMethod m()
    {
        set x = "world"
    }
    }

    // Class C2
    Class C2 [ Not ProcedureBlock ]
    {
    ClassMethod m()
    {
        do ##class(C1).m()
        w "hello ", x, "!", !
    }
    }
```

This means that any variable set in any class defined as Not ProcedureBlock will be visible to any other such class.
This is a very dangerous feature. It is very strongly recommended that the code be refactored so as to avoid using this feature altogether. One such way would be, for example, to use globals instead.
